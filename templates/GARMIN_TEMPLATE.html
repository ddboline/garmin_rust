<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>SPORTTITLEDATE</title>
<meta name="generator" content="HTML::TextToHTML v2.51"/>
<meta http-equiv="Cache-Control" content="no-store" />
</head>
<body>

<H3>
    <button type="submit" id="ID" onclick="garmin_sync();">sync with S3</button>
    <button type="submit" id="ID" onclick="garmin_connect_sync();">sync with Garmin Connect</button>
    <button type="submit" id="ID" onclick="strava_sync();">sync with Strava</button>
    <button name="garminconnectoutput" id="garminconnectoutput"> &nbsp; </button>
</H3>

<p>
HISTORYBUTTONS
</p>

<form>
<input type="text" name="filter" id="garmin_filter"/>
<input type="button" name="submitGARMIN" value="Submit" onclick="processFormData();"/>
</form>

<pre>
<table border="0">
INSERTTEXTHERE
</table>
</pre>

<script language="JavaScript" type="text/javascript">
    function send_command( command ) {
        var ostr = '../garmin?' + command;
        location.replace(ostr);
    }
    function processFormData() {
        var garmin_filter = document.getElementById( 'garmin_filter' );
        send_command( 'filter=' + garmin_filter.value );
    }
    function garmin_sync() {
        var ostr = '../garmin/garmin_sync';
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", ostr, true);
        xmlhttp.onload = function nothing() {
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "syncing";
    }
    function garmin_connect_sync() {
        var ostr = '../garmin/garmin_connect_sync';
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", ostr, true);
        xmlhttp.onload = function nothing() {
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "syncing";
    }
    function stravaAuth() {
        var ostr = "../strava/auth/read?domain=www.ddboline.net";
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function() {
            var win = window.open(xmlhttp.responseText, '_blank');
            win.focus()
        }
        xmlhttp.open( "GET", ostr, true );
        xmlhttp.send(null);
    }
    function strava_sync() {
        stravaAuth();
        var ostr = '../garmin/strava_sync';
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", ostr, true);
        xmlhttp.onload = function nothing() {
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "syncing";
    }
</script>

</body>
</html>
